{"version":3,"sources":["webpack:///./src/components/message/index.vue?02ff","webpack:///./src/components/message/index.vue?c7d8","webpack:///./src/components/message/msgTemplate.vue?a554","webpack:///src/components/message/msgTemplate.vue","webpack:///./src/components/message/msgTemplate.vue?bc7d","webpack:///./src/components/message/msgTemplate.vue","webpack:///src/components/message/index.vue","webpack:///./src/components/message/index.vue?753c","webpack:///./src/components/message/index.vue","webpack:///./src/components/message/form.vue?1ca5","webpack:///src/components/message/form.vue","webpack:///./src/components/message/form.vue?825f","webpack:///./src/components/message/form.vue","webpack:///./src/assets/img/author.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","on","submitMsg","attrs","msgList","total","msgChangePaging","replyUser","staticRenderFns","_l","msg","key","_id","_s","name","time","$event","_e","content","replyMsg","props","Array","Number","data","token","isShowReply","reply","methods","$emit","i","created","sessionStorage","getItem","component","components","CForm","CMsg","CSidebar","pageNum","msgShowNum","formatDate","index","window","scrollTo","getMsgData","$confirm","confirmButtonText","cancelButtonText","type","api","formData","email","alert","message","$prompt","msgId","id","value","params","forEach","e","notify","msgForm","rules","checkName","model","callback","$$v","$set","expression","submitForm","$refs","formName","validate","valid","successMsg","beforeDestroy","module","exports"],"mappings":"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","file":"js/message.20bd40de.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message container\"},[_c('div',{staticClass:\"msg_wrap\"},[_c('div',{staticClass:\"left\"},[_c('h2',{staticClass:\"msg_title\"},[_vm._v(\"给我留言\")]),_c('div',{staticClass:\"form\"},[_c('c-form',{ref:\"handlerForm\",on:{\"submitForm\":_vm.submitMsg}})],1),_c('div',{staticClass:\"msg\"},[_c('c-msg',{attrs:{\"msgList\":_vm.msgList,\"total\":_vm.total},on:{\"msgChangePaging\":_vm.msgChangePaging,\"replyUser\":_vm.replyUser}})],1)]),_c('div',{staticClass:\"right\"},[_c('c-sidebar')],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"common_msg\"},[_c('h3',[_vm._v(\"网友留言\")]),_vm._l((_vm.msgList),function(msg){return _c('div',{key:msg._id,staticClass:\"block_msg clearboth animate__animated animate__fadeIn\"},[_c('img',{attrs:{\"src\":require(\"@/assets/img/author.png\")}}),_c('div',{staticClass:\"msg_content\"},[_c('div',{staticClass:\"meta\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(msg.name))]),_c('span',{staticClass:\"time\"},[_vm._v(_vm._s(msg.time))]),(_vm.token)?_c('span',{staticClass:\"reply\",on:{\"click\":function($event){return _vm.replyUser(msg)}}},[_vm._v(\"回复\")]):_vm._e()]),_c('div',{staticClass:\"content\"},[_vm._v(_vm._s(msg.content))]),(msg.replyMsg)?_c('div',{staticClass:\"admin\"},[_c('i',{staticClass:\"el-icon-user-solid\"}),_c('span',[_vm._v(\"站长回复：\")]),_vm._v(\" \"+_vm._s(msg.replyMsg)+\" \")]):_vm._e()])])}),_c('div',{staticClass:\"msg_paging\"},[_c('el-pagination',{attrs:{\"layout\":\"prev, pager, next\",\"page-size\":6,\"total\":_vm.total,\"hide-on-single-page\":\"\"},on:{\"current-change\":_vm.msgChangePaging}})],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"common_msg\">\r\n    <h3>网友留言</h3>\r\n    <div class=\"block_msg clearboth animate__animated animate__fadeIn\" v-for=\"msg in msgList\" :key=\"msg._id\">\r\n      <img src=\"~@/assets/img/author.png\">\r\n      <div class=\"msg_content\">\r\n        <div class=\"meta\">\r\n          <span class=\"name\">{{msg.name}}</span>\r\n          <span class=\"time\">{{msg.time}}</span>\r\n          <span class=\"reply\" v-if=\"token\" @click=\"replyUser(msg)\">回复</span>\r\n        </div>\r\n        <div class=\"content\">{{msg.content}}</div>\r\n        <div class=\"admin\" v-if=\"msg.replyMsg\">\r\n          <i class=\"el-icon-user-solid\"></i>\r\n          <span>站长回复：</span>\r\n          {{msg.replyMsg}}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"msg_paging\">\r\n      <el-pagination\r\n        layout=\"prev, pager, next\"\r\n        :page-size=\"6\"\r\n        :total=\"total\"\r\n        hide-on-single-page\r\n        @current-change=\"msgChangePaging\">\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    msgList: Array,\r\n    total: Number\r\n  },\r\n  data () {\r\n    return {\r\n      token: '',\r\n      isShowReply: false,\r\n      reply: ''\r\n    }\r\n  },\r\n  methods: {\r\n    // 切换分页\r\n    msgChangePaging(i) {\r\n      this.$emit('msgChangePaging', i)\r\n    },\r\n    // 回复\r\n    replyUser (i) {\r\n      this.$emit('replyUser', i.name, i._id)\r\n    }\r\n  },\r\n  created() {\r\n    this.token = sessionStorage.getItem('token')\r\n  },\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./msgTemplate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./msgTemplate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./msgTemplate.vue?vue&type=template&id=d1b90454&\"\nimport script from \"./msgTemplate.vue?vue&type=script&lang=js&\"\nexport * from \"./msgTemplate.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"message container\">\r\n    <div class=\"msg_wrap\">\r\n      <div class=\"left\">\r\n        <h2 class=\"msg_title\">给我留言</h2>\r\n        <div class=\"form\">\r\n          <c-form ref=\"handlerForm\" @submitForm=\"submitMsg\"></c-form>\r\n        </div>\r\n        <div class=\"msg\">\r\n          <c-msg \r\n          :msgList=\"msgList\"\r\n          :total=\"total\"\r\n          @msgChangePaging=\"msgChangePaging\"\r\n          @replyUser=\"replyUser\"></c-msg>\r\n        </div>\r\n      </div>\r\n      <div class=\"right\">\r\n        <c-sidebar></c-sidebar>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport api from '@/api/index.js'\r\nimport moment from 'moment'\r\nimport CForm from './form'\r\nimport CMsg from './msgTemplate'\r\nimport CSidebar from '../common/sidebar'\r\n\r\nexport default {\r\n  components: {\r\n    CForm,\r\n    CMsg,\r\n    CSidebar\r\n  },\r\n  data() {\r\n    return {\r\n      msgList: [],\r\n      total: 0,\r\n      pageNum: 1,\r\n      msgShowNum: 6\r\n    }\r\n  },\r\n  methods: {\r\n    // 将时间转换格式为：M/D, YYYY · hh:mm\r\n    formatDate(date) {\r\n      let time = +moment(date)\r\n      let year = moment(time).year()\r\n      let month = moment(time).month()\r\n      let day = moment(time).date()\r\n      let house = moment(time).hour()\r\n      let minute = moment(time).minute()\r\n      return `${month+1}/${day}, ${year} · ${house}:${minute}`\r\n    },\r\n    // 点击换页\r\n    msgChangePaging (index) {\r\n      this.pageNum = index\r\n      window.scrollTo(0,400)\r\n      this.getMsgData()\r\n    },\r\n    // 发布留言\r\n    submitMsg(formData){\r\n      if(!formData.name || !formData.email || !formData.content) return\r\n      this.$confirm('确定发布留言吗?', '留言', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'info'\r\n      }).then(() => {\r\n        api.addMsg({\r\n          name: formData.name ,\r\n          email: formData.email ,\r\n          content: formData.content \r\n        }).then(res => {\r\n          let data = res.data\r\n          if(data.data === '留言成功') {\r\n            alert('留言成功')\r\n            this.$refs.handlerForm.successMsg()\r\n            this.getMsgData()\r\n          } else if(data.data === '留言失败'){\r\n            alert('留言失败，请重试')\r\n          } else{\r\n            alert('昵称重复')\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '取消留言'\r\n        })        \r\n      })\r\n      \r\n    },\r\n    // 回复留言\r\n    replyUser(name, id){\r\n      // 拿到点击的标的 根据标的的id 发送请求，成功后重新获取数据渲染到页面\r\n      this.$prompt(`回复${name}`, '', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消'\r\n      }).then(({ value }) => {\r\n        api.replyMsg({\r\n          msgId: id,\r\n          content: value\r\n        }).then(res => {\r\n          if(res.data.data === '回复成功') {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '回复成功'\r\n            })\r\n            this.getMsgData()\r\n          } else {\r\n            this.$message('回复失败')\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '取消输入'\r\n        });     \r\n      })\r\n    },\r\n    // 获取数据\r\n    getMsgData () {\r\n      if(this.pageNum !== 1 && this.msgList.length < this.msgShowNum) return\r\n      api.getPagingMsg({\r\n        params: {\r\n          pageNum: this.pageNum,\r\n          msgShowNum: this.msgShowNum\r\n        }\r\n      }).then(res => {\r\n        let data = res.data\r\n        if(data.code === 200 && data.data.total) {\r\n          this.total = data.data.total\r\n          data.data.data.forEach(e => {\r\n            e.time = this.formatDate(e.time)\r\n          })\r\n          this.msgList = data.data.data\r\n        }\r\n      })\r\n    },\r\n    notify () {\r\n      \r\n    }\r\n  },\r\n  created() {\r\n    this.getMsgData()\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  @import '@/assets/css/message/index.scss';\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=28163c70&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"common_form\"},[_c('el-form',{ref:\"msgForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.msgForm,\"status-icon\":\"\",\"rules\":_vm.rules}},[_c('el-form-item',{staticClass:\"name\",attrs:{\"prop\":\"name\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"昵称*\",\"autocomplete\":\"off\"},on:{\"blur\":_vm.checkName},model:{value:(_vm.msgForm.name),callback:function ($$v) {_vm.$set(_vm.msgForm, \"name\", $$v)},expression:\"msgForm.name\"}})],1),_c('el-form-item',{staticClass:\"email\",attrs:{\"prop\":\"email\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"邮箱*\",\"autocomplete\":\"off\"},model:{value:(_vm.msgForm.email),callback:function ($$v) {_vm.$set(_vm.msgForm, \"email\", $$v)},expression:\"msgForm.email\"}})],1),_c('el-form-item',{staticClass:\"content\",attrs:{\"prop\":\"content\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":5,\"maxlength\":\"50\",\"placeholder\":\"请输入留言内容\"},model:{value:(_vm.msgForm.content),callback:function ($$v) {_vm.$set(_vm.msgForm, \"content\", $$v)},expression:\"msgForm.content\"}})],1),_c('el-form-item',{staticClass:\"btn\"},[_c('p',{staticClass:\"clearboth\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('msgForm')}}},[_vm._v(\"发布\")])],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"common_form\">\r\n    <el-form \r\n      :model=\"msgForm\" \r\n      status-icon \r\n      :rules=\"rules\" \r\n      ref=\"msgForm\"\r\n      class=\"demo-ruleForm\">\r\n      <el-form-item class=\"name\" prop=\"name\">\r\n        <el-input type=\"text\" placeholder=\"昵称*\" v-model=\"msgForm.name\" autocomplete=\"off\" @blur=\"checkName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item class=\"email\" prop=\"email\">\r\n        <el-input type=\"text\" placeholder=\"邮箱*\" v-model=\"msgForm.email\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item class=\"content\" prop=\"content\">\r\n        <el-input type=\"textarea\" :rows=\"5\" maxlength=\"50\" v-model=\"msgForm.content\" placeholder=\"请输入留言内容\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item class=\"btn\">\r\n        <p class=\"clearboth\"><el-button type=\"primary\" @click=\"submitForm('msgForm')\">发布</el-button></p>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api/index.js'\r\nimport {filterStr} from '@/util'\r\nexport default {\r\n  data() {\r\n    return {\r\n      msgForm:{\r\n        name: '',\r\n        email: '',\r\n        content: '',\r\n      },\r\n      rules: {\r\n        name: [\r\n          { required: true, message: '请输入昵称', trigger: 'blur' },\r\n          { min: 2, max: 6, message: '长度在 2 到 6 个字符', trigger: 'blur' },\r\n          {type: 'string', whitespace: true}\r\n        ],\r\n        email: [\r\n          { required: true, message: '请输入邮箱地址', trigger: 'blur' },\r\n          { type: 'email', message: '请输入正确的邮箱地址', trigger: ['blur', 'change'] },\r\n          {type: 'string', whitespace: true}\r\n        ],\r\n        content: [\r\n          { required: true, message: '请输入留言内容', trigger: 'blur' },\r\n          { min: 1, max: 50, message: '长度不超过50个字符', trigger: 'blur' },\r\n          {type: 'string', whitespace: true}\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 表单验证\r\n    submitForm(formName) {\r\n      const obj = {...this.msgForm}\r\n      this.$refs[formName].validate((valid) => {\r\n        this.msgForm.name = filterStr(this.msgForm.name)\r\n        this.msgForm.email = filterStr(this.msgForm.email)\r\n        this.msgForm.content = filterStr(this.msgForm.content)\r\n        if (valid) {\r\n          this.$emit('submitForm', obj)\r\n          this.msgForm.content = ''\r\n        } else {\r\n          alert('未通过验证，请检查后重试')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // 检查昵称是否重复\r\n    checkName () {\r\n      if(!this.msgForm.name) return\r\n      api.checkName({\r\n        params: {\r\n          name: filterStr(this.msgForm.name)\r\n        }\r\n      }).then(res => {\r\n        let data = res.data\r\n        if(data.data === '昵称重复'){\r\n          alert('昵称重复请更换')\r\n        }\r\n      })\r\n    },\r\n    // 发布成功后初始化\r\n    successMsg () {\r\n      this.content = ''\r\n    }\r\n  },\r\n  beforeDestroy () {\r\n    this.msgForm.name = ''\r\n    this.msgForm.email = ''\r\n    this.msgForm.content = ''\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./form.vue?vue&type=template&id=6c958803&\"\nimport script from \"./form.vue?vue&type=script&lang=js&\"\nexport * from \"./form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = \"data:image/png;base64,/9j/4AAQSkZJRgABAQEAYABgAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2NjIpLCBxdWFsaXR5ID0gOTAK/9sAQwADAgIDAgIDAwMDBAMDBAUIBQUEBAUKBwcGCAwKDAwLCgsLDQ4SEA0OEQ4LCxAWEBETFBUVFQwPFxgWFBgSFBUU/9sAQwEDBAQFBAUJBQUJFA0LDRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU/8AAEQgAPAA8AwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A+t8CjFJ+VH5UALgUYFavh3w1e+JrwwWiDavMkr8Ig9z/AEr0S1+DenrEBc31zJJjkxBUH5EGgDybAowK7/xF8JrmwgefTZzeooyYXXEmPbHB+nFcAQQcHg+lABgUYFJ+VH5UALn3oz70fjRzQB734F0iPR/DNkigCSZBNK3cswz+gwPwrfz71jeDdTTVfDOnzI2SsSxuPRlGD/LP41tc0AJn3rxX4o6RHpfiUywgJHdJ5xAHAbJDfyz+Ne1814z8WdTS98SJBG24WsQRiP7xJJH6igDis+9Gfej8aPx/SgA/Oj86MfWux+HPg1fEV611dqTYW5GV/wCej9dv07n8PWgDS+F1nr0E5ntowulyn959oJVX90759+ler/nSJGI0VFUKqjAVeABTsGgDM8Q/2odMlGkCL7WRgGY4wPbtn68V4BqVrdWd7NFexyx3QYlxL94k9/fPrX0lj61z3jLwjB4p05lwEvYwTDN3B/un2NAHgv50fnT54JLaaSGVGSSNirKeoI4IpmPrQAfhX0J4T0hdE8PWVqFw4jDSe7nk/qf0rwGxjWS9t1YZVpFBH419K4FACY9qMe1GKMUAGPajHtRjrRigDxv4s6Qtj4hjukXCXce44/vjg/pj864nHtXqnxmjU2WmPj5hI4B+oH+FeVgAigD/2Q==\""],"sourceRoot":""}